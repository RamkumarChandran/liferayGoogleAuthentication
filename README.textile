@/**@
 @* Copyright (C) Rotterdam Community Solutions B.V.@
 @* http://www.rotterdam-cs.com@
 @*@
 @***********************************************************************************************************************@
 @*@
 @* Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with@
 @* the License. You may obtain a copy of the License at@
 @*@
 @*     http://www.apache.org/licenses/LICENSE-2.0@
 @*@
 @* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on@
 @* an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the@
 @* specific language governing permissions and limitations under the License.@
 @*/@

h3. Liferay - Google Authentication Module

This module is primary responsible for authenticating user with existing google account in liferay portal 6.1 CE ga1.

h5. Component required:

	Maven - To build wars and deploy on liferay portal.
	Liferay portal 6.1 CE ga1 

h5. Setup/Configure

	- Configure you apps in Google - Generate Google Ouath2.0 Api Client Id and Secret
		"https://code.google.com/apis/console#access":https://code.google.com/apis/console#access

	- Checkout latest code from github repo (for enchanement, and security updated).

	- Edit \liferayGoogleAuthentication\pom.xml to update your liferay-portal-6.1.0-ce-ga1 path on local dev enviroment.
		 <blockquote><liferay.dir>D/rotterdam/liferay-portal-6.1.0-ce-ga1</liferay.dir></blockquote>

	- cmd to \liferayGoogleAuthentication\google-sso and execute following command
		<blockquote>mvn clean install package liferay:deploy</blockquote>

	- cmd to \liferayGoogleAuthentication\google-login-hook and execute following command
		<blockquote>mvn clean package liferay:deploy</blockquote>

	- add following properties in portal-ext.properties under \liferay-portal-6.1.0-ce-ga1\tomcat-7.0.23\webapps\ROOT\WEB-INF\classes

			<blockquote>
			google.connect.auth.enabled=true
			google.connect.app.id=<google_oauth_client_api_key>
			google.connect.app.secret=<google_oauth_client_secret>
			google.connect.oauth.auth.url=https://accounts.google.com/o/oauth2/auth
			google.connect.oauth.token.url=https://accounts.google.com/o/oauth2/token
			google.connect.oauth.redirect.url=http://localhost:8080/c/login/oauth2callback
			google.connect.graph.url=https://www.googleapis.com/oauth2/v1/userinfo
			google.connect.oauth.scope=https://www.googleapis.com/auth/userinfo.profile,https://www.googleapis.com/auth/userinfo.email
			google.connect.oauth.revoke=https://accounts.google.com/o/oauth2/revoke
			google.connect.verified.account.required=false

			auto.login.hooks=com.liferay.portal.security.auth.GoogleAutoLogin

			#
			# Enter a list of comma delimited paths that do not require authentication.
			#
		    auth.public.paths=\
		        /asset/get_categories,\
		        \
		        /blogs/find_entry,\
		        /blogs/rss,\
		        /blogs/trackback,\
		        \
		        /blogs_aggregator/rss,\
		        \
		        /bookmarks/open_entry,\
		        \
		        /calendar/find_event,\
		        \
		        /document_library/find_file_entry,\
		        /document_library/find_folder,\
		        /document_library/get_file,\
		        \
		        /flags/edit_flag,\
		        \
		        /iframe/proxy,\
		        \
		        /image_gallery_display/find_folder,\
		        /image_gallery_display/find_image,\
		        \
		        /journal/get_article,\
		        /journal/get_articles,\
		        /journal/get_latest_article_content,\
		        /journal/get_structure,\
		        /journal/get_template,\
		        /journal/rss,\
		        /journal/view_article_content,\
		        /journal_articles/view_article_content,\
		        \
		        /layouts_admin/robots,\
		        /layouts_admin/sitemap,\
		        \
		        /login/facebook_connect_oauth,\
		        \
		        /login/oauth2callback,\
		        \
		        /message_boards/find_category,\
		        /message_boards/find_message,\
		        /message_boards/find_thread,\
		        /message_boards/get_message_attachment,\
		        /message_boards/rss,\
		        \
		        /my_sites/view,\
		        \
		        /polls/view_chart,\
		        \
		        /portal/emoticons,\
		        /portal/expire_session,\
		        /portal/extend_session,\
		        /portal/extend_session_confirm,\
		        /portal/json_service,\
		        /portal/license,\
		        /portal/logout,\
		        /portal/open_id_request,\
		        /portal/open_id_response,\
		        /portal/portlet_url,\
		        /portal/session_click,\
		        /portal/session_tree_js_click,\
		        /portal/status,\
		        \
		        /search/open_search,\
		        /search/open_search_description.xml,\
		        \
		        /shopping/notify,\
		        \
		        /wiki/find_page,\
		        /wiki/get_page_attachment,\
		        /wiki/rss
				</blockquote>

		- Restart liferay portal

h5. Google Oauth 2.0 Reference

	"https://developers.google.com/accounts/docs/OAuth2Login":https://developers.google.com/accounts/docs/OAuth2Login
	"https://developers.google.com/accounts/docs/OAuth2WebServer":https://developers.google.com/accounts/docs/OAuth2WebServer

